<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital</title>
    <link href="public/css/custom.css" rel="stylesheet">
</head>
<body>
    <div id="main" class="main">
        <div style="width: 100%;background-color:#2D67F6;height:20%;">
            <div style="width:100%; background-color: #2D67F6; height: 50%; font-size: 2rem; text-align: center; color: #fdfbec; font-weight: 200; padding-top: 3%;">
                <span style="vertical-align: middle;">{{department}}</span>
            </div>
            <div style="display: flex; height:50%;">
                <div style="width: 50%;padding: 0px 10px;">
                    <span style="color: white; font-size: 1.0rem;">醫師</span>
                    <div style="background-color: white;height:50%; border-radius: 5px;display:flex; align-items: center;">
                        <img src="public/image/stethoscope.png" style="height:80%;margin-top: calc(2.5vh-20px);">
                        <span style="font-size: 1.0rem;">{{doctor}}</span>                  
                    </div>               
                </div>
                <div style="width: 50%;padding: 0px 10px;">
                    <span style="width:50%;color: white;font-size: 1.0rem;">護理師</span>
                    <div style="background-color: white;height:50%; border-radius: 5px;display:flex; align-items: center">
                        <img src="public/image/needle.png" style="height:80%;margin-top: calc(2.5vh-20px);">
                        <span style="font-size: 1.0rem;">{{nurse}}</span>
                    </div>
                </div>                  
            </div>
        </div>

        <div style="height:20vh; width: 100%;">
            <div style="width: 100%; height:100%; display: flex;">
                <div style="width: 50%; height:100%; padding: 0px 10px;">
                    <div style="background-color: #e44e69; height: 15%; width: 100%; border-radius: 5px 5px 0px 0px; text-align: center; align-items: center;">
                        <span style="vertical-align: middle;  color:white;">目前號碼</span>
                    </div>
                    <div class="numberNow" style="background-color: #eeefe7; height: 85%; width: 100%; border-radius: 5px 5px 0px 0px; padding: auto;">
                        <span style="vertical-align: middle;">{{numberNow}}</span>
                    </div>
                </div>
                <div style="width: 50%; height:100%;padding: 0px 10px; ">
                    <div style="background-color: #2D67F6; height: 15%; width: 100%; border-radius: 5px 5px 0px 0px; text-align: center; align-items: center;">
                        <span style="vertical-align: middle;  color:white;">下一號</span>
                    </div>
                    <div class="numberNow2" style="background-color: #eeefe7; height: 85%; width: 100%; border-radius: 5px 5px 0px 0px; padding: auto;">
                        <span style="vertical-align: middle;">{{numberNow+1}}</span>
                    </div>
                </div>
            </div>
        </div>
        <div style="width: 100%;height:35%;">
            <table >
                <thead>
                    <tr>
                        <td class="tdfirst">看診號</td>
                        <td class="tdfirst">病人姓名</td>
                        <td class="tdfirst">看診狀態</td>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="item in data_show">
                        <td v-text="item.number"></td>
                        <td v-text="item.name"></td>
                        <td v-text="item.status"></td>
                    </tr>
                </tbody>
            </table>
            <div class="float">
              <span style="vertical-align: middle;">候診名單</span>
            </div>
        </div>
        <div class="box4">
            <div style="background-color: blue; height: 15%; width: 100%; color: white; text-align: center; align-items: center; border-radius: 5px 5px 0px 0px;">
                <span style="vertical-align: middle;">公佈欄</span>
            </div>
            1. 您好，為維護門診寧靜，請您注意音量
        </div>
    </div>
</body>
<script src="public/js/vue.js"></script>
<script src="public/js/jquery-3.6.0.min.js"></script>
<script type="text/javascript">
    var main = new Vue({
        el:"#main",
        data:{
            department:"兒科(一診)",
            doctor:"楊醫生",
            nurse:"李護士",
            number:"看診號",
            status:"看診狀態",
            numberNow:3,
            data_show:[[],[],[],[],[],[]],
            order:0, //目前要顯示的病人
            case_json:[
                    {
                        "ID": "1201",
                        "number": "01",
                        "name": "趙" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "0231",
                        "number": "02",
                        "name": "錢" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "5232",
                        "number": "03",
                        "name": "孫" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "7239",
                        "number": "04",
                        "name": "李" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "0881",
                        "number": "05",
                        "name": "周" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "6222",
                        "number": "06",
                        "name": "吳" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "5820",
                        "number": "07",
                        "name": "鄭" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "1154",
                        "number": "08",
                        "name": "王" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "254",
                        "number": "09",
                        "name": "郭" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "4210",
                        "number": "10",
                        "name": "林" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "214",
                        "number": "11",
                        "name": "張" ,
                        "status": "現場掛號"
                    },
                    {
                        "ID": "2154",
                        "number": "12",
                        "name": "吳" ,
                        "status": "現場掛號"
                    },   
                    {
                        "ID": "2159",
                        "number": "13",
                        "name": "李先生" ,
                        "status": "現場掛號"
                    },
                    ],
                    data_null :  {
                        "ID": " ",
                        "number": "",
                        "name": "" ,
                        "status": ""
                    }, 
        },
        mounted: function () {
            setInterval(function(){
                    main.data_show=[];
                    for (let index = 0; index < 6; index++) {
                        if(main.order==main.case_json.length){
                            main.data_show[index] = main.data_null;//11 person_number                    
                        }else{
                        main.data_show[index]=main.case_json[main.order];
                        main.order++; 
                        }
                    }
                    if(main.order==main.case_json.length){
                        main.order=0;
                    }
                }, 3000);
        }
    });
    function display(){
        $.getJSON("case.json", function(json_data){
            
            $("tbody td").text("");
            for (let index = 0; index < 6; index++) {
                //code
                let id_string = "#tr"+(index+1);
                
                let number = json_data[order]['number'];
                let name = json_data[order]['name'];
                let status = json_data[order]['status'];
                $(id_string+" td:nth-child(1)").text(number);
                $(id_string+" td:nth-child(2)").text(name);
                $(id_string+" td:nth-child(3)").text(status);
                
                console.log(order);

                if(order == json_data.length-1){
                    order=0;
                    //break;
                }else{
                    order++;
                }
            }
        });
    }
</script>
</html>