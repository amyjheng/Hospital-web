<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital</title>
    <link href="public/css/custom.css" rel="stylesheet">
</head>
<body>
    <div id="main" class="main">
        <div style="width: 100%;background-color:#2D67F6;height:20%;">
            <div style="width:100%; background-color: #2D67F6; height: 50%; font-size: 2rem; text-align: center; color: #fdfbec; font-weight: 200; padding-top: 3%;">
                <span style="vertical-align: middle;">{{department}}</span>
            </div>
            <div style="display: flex; height:50%;">
                <div style="width: 50%;padding: 0px 10px;">
                    <span style="color: white; font-size: 1.0rem;">醫師</span>
                    <div style="background-color: white;height:50%; border-radius: 5px;display:flex; align-items: center;">
                        <img src="public/image/stethoscope.png" style="height:80%;margin-top: calc(2.5vh-20px);">
                        <span style="font-size: 1.0rem;">{{doctor}}</span>                  
                    </div>               
                </div>
                <div style="width: 50%;padding: 0px 10px;">
                    <span style="width:50%;color: white;font-size: 1.0rem;">護理師</span>
                    <div style="background-color: white;height:50%; border-radius: 5px;display:flex; align-items: center">
                        <img src="public/image/needle.png" style="height:80%;margin-top: calc(2.5vh-20px);">
                        <span style="font-size: 1.0rem;">{{nurse}}</span>
                    </div>
                </div>                  
            </div>
        </div>

        <div style="height:20vh; width: 100%;">
            <div style="width: 100%; height:100%; display: flex;">
                <div style="width: 50%; height:100%; padding: 0px 10px;">
                    <div style="background-color: #e44e69; height: 15%; width: 100%; border-radius: 5px 5px 0px 0px; text-align: center; align-items: center;">
                        <span style="vertical-align: middle;  color:white;">目前號碼</span>
                    </div>
                    <div class="numberNow" style="background-color: #eeefe7; height: 85%; width: 100%; border-radius: 5px 5px 0px 0px; padding: auto;">
                        <span style="vertical-align: middle;">{{numberNow}}</span>
                    </div>
                </div>
                <div style="width: 50%; height:100%;padding: 0px 10px; ">
                    <div style="background-color: #2D67F6; height: 15%; width: 100%; border-radius: 5px 5px 0px 0px; text-align: center; align-items: center;">
                        <span style="vertical-align: middle;  color:white;">下一號</span>
                    </div>
                    <div style="background-color: #eeefe7; height: 85%; width: 100%; border-radius: 5px 5px 0px 0px; text-align: center; align-items: center">

                    </div>
                </div>
            </div>
        </div>
        <div style="width: 100%;height:35%;">
            <table >
                <thead>
                    <tr>
                        <td class="tdfirst">看診號</td>
                        <td class="tdfirst">病人姓名</td>
                        <td class="tdfirst">看診狀態</td>
                    </tr>
                </thead>
                <tbody>
                    <tr id="tr1">
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr id="tr2">
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr id="tr3">
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr id="tr4">
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr id="tr5">
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr id="tr6">
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <div class="float">
              <span style="vertical-align: middle;">候診名單</span>
            </div>
        </div>
        <div class="box4">
            <div style="background-color: blue; height: 15%; width: 100%; color: white; text-align: center; align-items: center; border-radius: 5px 5px 0px 0px;">
                <span style="vertical-align: middle;">公佈欄</span>
            </div>
            1. 您好，為維護門診寧靜，請您注意音量
        </div>
    </div>
</body>
<script src="public/js/vue.js"></script>
<script src="public/js/jquery-3.6.0.min.js"></script>
<script type="text/javascript">
    var main = new Vue({
        el:"#main",
        data:{
            department:"兒科(一診)",
            doctor:"楊醫生",
            nurse:"李護士",
            row1:"007",
            name1:"郭雅年",
            status1:"現場掛號",
            numberNow:3
            
        },
        mounted: function () {
            setInterval("display()", 3000);
        }
    });
    let order=0; //紀錄顯示到第幾個病人
    function display(){
        $.getJSON("case.json", function(json_data){
            
            $("tbody td").text("");
            for (let index = 0; index < 6; index++) {
                //code
                let id_string = "#tr"+(index+1);
                
                let number = json_data[order]['number'];
                let name = json_data[order]['name'];
                let status = json_data[order]['status'];
                $(id_string+" td:nth-child(1)").text(number);
                $(id_string+" td:nth-child(2)").text(name);
                $(id_string+" td:nth-child(3)").text(status);
                
                console.log(order);

                if(order == json_data.length-1){
                    order=0;
                    //break;
                }else{
                    order++;

                }
            }
        });
    }


</script>
</html>